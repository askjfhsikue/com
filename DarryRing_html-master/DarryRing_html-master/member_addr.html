<html xmlns="http://www.w3.org/1999/xhtml" class="hb-loaded">

	<head>
		<meta charset="utf-8" />
		<title>个人中心 - 地址管理</title>
		<link href="css/same.css?v=1.3.7.2" type="text/css" rel="stylesheet" />
		<link href="css/same.css?v=1.3.7.2" type="text/css" rel="stylesheet" />
		<link href="css/member.css?v=1.3.6.0" type="text/css" rel="stylesheet" />
		<script src="js/jquery.js" type="text/javascript"></script>
		<script src="js/index.js?virsion=1.3.7.2" type="text/javascript"></script>
		<script src="js/member.js" type="text/javascript"></script>
		<script>
			$(function() {
				$("#street").blur(function() {
					var street = $("#street").val();
					if (street == "") {
						$("#strwrong").text("请输入详细地址！");
						$("#streeid").show();
						$("#streey").hide();
						return false;
					}
					if (street.length > 500) {
						$("#strwrong").text("输入内容过长！");
						$("#streeid").show();
						$("#streey").hide();
						return false;
					} else {
						$("#streeid").hide();
						$("#streey").show();

					}
				});
				$("#postcode").blur(function() {
					var post = $("#postcode").val();
					if (post == "") {
						$("#postwrong").text("请邮政编码！");
						$("#postid").show();
						return false;
					} else {
						$("#postid").hide();
						$("#posty").show();

					}
				});
				$("#postcode").blur(function() {

				});
				$("#telephone").blur(function() {

					var tel = $("#telephone").val();
					if (tel == "") {
						$("#telwrong").text("请输入手机号或者固定电话！");
						$("#telid").show();
						return false;
					} else {
						$("#telid").hide();
						if (!checkphone(tel)) {
							$("#telwrong").text("座机号格式不正确！");
							$("#telid").show();

							return false;
						} else {
							$("#telid").hide();
							$("#tely").show();
						}

					}
				});
				$("#mobile").blur(function() {});
				//保存地址按钮事件
				$(".add_adress-save").click(function() {

					var name = $("#addressName").val();
					var pro = $("#province option:selected").text();
					var city = $("#city option:selected").text();
					var dis = $("#district option:selected").text();
					var street = $("#street").val();
					var post = $("#postcode").val();
					var mobile = $("#mobile").val();
					var tel = $("#telephone").val();
					if (dis == "请选择区县") {
						$("#addwrong").text("请选择区县！");
						$("#addy").hide();
						$("#addid").show();
						return false;
					}
					if (name == "") {
						$("#shrwrong").text("请输入姓名！");
						$("#shrid").show();
						return false;
					} else {
						$("#shry").show();

					}
					if (street == "") {
						$("#strwrong").text("请输入详细地址！");
						$("#streeid").show();
						return false;
					} else {
						$("#streey").show();

					}
					if (post == "") {
						$("#postwrong").text("请输入邮编！");
						$("#postid").show();
						return false;
					} else {
						$("#posty").show();

					}
					if (mobile == "" || tel == "") {
						$("#telwrong").text("请输入手机号或者固定电话！");
						$("#telid").show();
						return false;
					} else {
						$("#tely").show();
					}
					if (mobile != "") {
						if (!checkTel(mobile)) {
							$("#telwrong").text("手机号格式不正确！");
							$("#telid").show();
							$("#tely").hide();
							return false;
						} else {
							$("#telid").hide();
							$("#tely").show();
						}
					}

					var data = getData();
					var action = "save";
					if (isNaN(data.ID)) {
						action = "add";
					}
				});
			});

			function getData() {
				var id = $(".shop_adress-add").attr("id");
				id = id ? id.replace("address_", "") : undefined;
				return {
					"ID": id,
					"name": $("#addressName").val(),
					"province": $("#province option:selected").text(),
					"city": $("#city option:selected").text(),
					"district": $("#district option:selected").text(),
					"street": $("#street").val(),
					"postcode": $("#postcode").val(),
					"mobile": $("#mobile").val(),
					"telephone": $("#telephone").val(),
					"IsDefault": $("#cbDefaultAddress").attr("checked")
				};
			}

			function showAddress(id) {
				//地址标题，新增还是修改
				$(".member_adress-addtop span").text("修改地址");
				$(".shop_adress-add").show();
				$(".shop_adress-add").attr("id", "address_" + id);
			}

			function setAddress(data) {
				$("#addressName").val(data.name);
				$("#province option").each(function() {
					if (data.city.indexOf($(this).text()) != -1) {
						$("#province").val($(this).val());
						$("#province").change();
					}
				});
				CityDataLoadEvent = function() {
					$("#city option").each(function() {
						if (data.city.indexOf($(this).text()) != -1) {
							$("#city").val($(this).val());
							$("#city").change();
						}
					});
				};
				DistrictDataLoadEvent = function() {
					$("#district option").each(function() {
						if (data.city.indexOf($(this).text()) != -1) {
							$("#district").val($(this).val());
						}
					});
				};

				$("#street").val(data.street);
				$("#postcode").val(data.code);
				$("#mobile").val(data.mobile);
				$("#telephone").val(data.phone);
				$("#cbDefaultAddress").attr("checked", data.IsDefault);
			}

			function deleteAddress(id) {
				if (confirm("确认是否删除？")) {}
			}

			function bindDdlData(cid, data) {
				$(cid).append($("<option value=\"" + data.code + "\">" + data.name + "</option>"));
			}
			CityDataLoadEvent = function() {
				$("#city option").each(function() {
					if (data.city.indexOf($(this).text()) != -1) {
						$("#city").val($(this).val());
						$("#city").change();
					}
				});
			};
			DistrictDataLoadEvent = function() {
				$("#district option").each(function() {
					if (data.city.indexOf($(this).text()) != -1) {
						$("#district").val($(this).val());
					}
				});
			};
			//
			function checkTel(tel) {
				var mobile = /^1[3-8]+\d{9}$/;
				return mobile.test(tel);
			}
			//
			function checkcode(zipcode) {
				var MyNumber = /^[0-9]{1}[0-9]{5}$/;
				return MyNumber.test(zipcode);

			}

			function checkphone(tel) {
				var mobile = /^0\d{2,3}-?\d{7,8}$/;
				return mobile.test(tel);
			}
		</script>
	</head>

	<body>

		<form id="aspnetForm" action="member_addr.html" method="post" name="aspnetForm">

			<div>
				<!--头部-->
				<div class="cmain">
					<div class="headtop">
						<!--头部左边-->
						<div class="top-left fl">

						</div>
						<!--头部左边end-->
						<!--头部右边-->
						<div class="top-right fr">
							<!--登录注册-->
							<ul class="tright-ul fl">
								<div id="ctl00_ucheader_pllogin2">
									<li><a><span id="ctl00_ucheader_lit">KLNgOk</span><em>|</em></a></li>
									<li> <a href="javascript:logout()" rel="nofollow">退出</a><em>|</em> </li>
									<li><a target="black" rel="nofollow" href="member_index.html">个人中心</a><em>|</em></li>
									<li class="headed"><em class="icon shooping"></em><a target="black" rel="nofollow" href="cart.html">购物车</a><i>(0)</i></li>
								</div>
							</ul>
						</div>
						<!--头部右边end-->
					</div>
				</div>
				<!--头部end-->
				<!--导航-->
				<div class="nav">
					<div class="cmain">
						<!--导航的左边-->
						<ul class="nav-ul fl">
							<li><a href="index.html">首页</a> </li>
							<li><a href="brand.html">品牌文化</a> </li>
							<li><a style="font-family:arial" href="lists.html">所有商品</a>
								<div class="nav-div">
									<div class="navdiv_top">
										<div class="navdiv-right">
											<p> <a href="lists.html"> 查看所有款</a></p>
											<p> <a href="/dr_series/12_22.html">Forever系列</a></p>
											<p> <a href="/dr_series/11_20.html">My Heart系列</a></p>
											<p> <a href="/dr_series/16_30.html">True Love系列</a></p>
											<p> <a href="/dr_series/15_28.html">I Swear系列</a></p>
											<p> <a href="/dr_series/13_24.html">Just you系列</a></p>
										</div>
										<div class="navdiv-left">
											<h3> NEW</h3>
											<a href="detail.html"> <img width="138" height="97" src="images/03wj.jpg" /></a>
											<div class="more_cp">
												<a href="detail.html">&gt; 了解该系列产品</a>
											</div>
										</div>
									</div>
									<div class="navdiv_bottom"></div>
								</div>
							</li>
						</ul>

					</div>
				</div>
				<!--导航end-->
				<script type="text/javascript">
					function logout() {
						if (window.confirm('确定退出吗？')) {

							$.get("/nAPI/QuitExit.ashx", function(data) {
								window.location.href = "/";
							});
						}
					}
				</script>
				<div class="cort">
					<!--中间-->
					<div class="cort">
						<!--内容-->
						<div class="cmain mb_back">
							<div class="zbk_top spalid">
								<div class="zbk_top spalid">
									<span>您当前的位置：</span>
									<span id="ctl00_content_website_SiteMapPath1"><a href="#ctl00_content_website_SiteMapPath1_SkipLink"></a><span> <a target="_blank" href="index.html">商城</a> </span><span> <em>&gt;</em> </span><span> <a target="_blank" href="member_index.html">个人中心</a> </span><span> <em>&gt;</em> </span><span> <span>收货地址</span>									</span>
									<a id="ctl00_content_website_SiteMapPath1_SkipLink"></a>
									</span>
								</div>
							</div>
							<!--中间内容-->
							<div class="member_cort">
								<!--左边树-->
								<div class="member_cort-left fl">
									<!--我的DR-->
									<div class="member_cortleft-tittle">
										<i class="mb_home"></i>
										<a rel="nofollow" href="member_index.html">个人中心</a>
									</div>
									<!--我的DR end-->
									<ul class="member_cort-ul">
										<li>
											<h3> -订单中心-</h3>
											<ul class="member_ul-dr">
												<li id="ctl00_content_treeId_order"><a rel="nofollow" href="member_order.html">我的订单</a></li>
												<li id="ctl00_content_treeId_cart"><a rel="nofollow" href="cart.html" target="_blank">我的购物车</a></li>
											</ul>
										</li>

										<li>
											<h3> -帐户管理-</h3>
											<ul class="member_ul-dr">
												<li id="ctl00_content_treeId_myinfo"><a rel="nofollow" href="member_info.html">个人信息</a></li>
												<li id="ctl00_content_treeId_password"><a rel="nofollow" href="member_pwd.html">修改密码</a></li>
												<li class="speacil_color" id="ctl00_content_treeId_address"><a rel="nofollow" href="member_addr.html">收货地址</a></li>
											</ul>
										</li>
									</ul>
								</div>
								<!--左边树end-->
								<!--右边的主要内容-->
								<div class="member_cort-right fr">
									<!--收货地址-->
									<div class="member_adress">
										<div class="myorder-xq-news_top">
											<p> 收货地址</p>
										</div>
										<!--收货地址选择-->
										<table cellspacing="0" cellpadding="0" border="0" class="member_adress-top">
											<tbody>
												<tr class="member_adress-trfirst">
													<td class="member_adress-td1"> 收件人姓名 </td>
													<td class="member_adress-td2"> 详细地址 </td>
													<td class="member_adress-td3"> 联系方式 </td>
													<td class="member_adress-td4"> 邮政编码 </td>
													<td class="member_adress-td5"> 操作 </td>
												</tr>
												<tr class="member_adress-trsec">
													<td class="member_adress-td1"> <label for="61921"> 张合</label> </td>
													<td class="member_adress-td2"> <label> 福建省龙岩市长汀县娃娃亲到青岛</label> </td>
													<td class="member_adress-td3">
														<p> 13851435593</p>
														<p> </p>
													</td>
													<td class="member_adress-td4"> 223311 </td>
													<td class="member_adress-td5"> <input type="radio" checked="checked" name="adress" id="61921" value="61921" onClick="szdefault(61921);" /> <label for="61921"> 设为常用地址 </label> <a href="javascript:showAddress(61921);">修改</a><i>|</i><a href="javascript:deleteAddress(61921);">删除</a>														</td>
												</tr>
											</tbody>
										</table>
										<!--收货地址选择end-->
										<div class="member_adress-addtop">
											<span>添加新地址</span>
											<i></i>
										</div>
										<!--新加地址-->
										<div class="shop_adress-add">
											<div id="addresses" class="shop_adress-Toadd">
												<span id="addid" style="display: none"><i class="writer_wrong"></i><em id="addwrong" class="writer_word">信息报错样式显示！</em></span>
												<span id="addy" style="display: none"><i class="writer_right"> </i></span>
											</div>
											<div id="detailadd" class="shop_adress-Toadd">
												<label class="adress-Toadd_label"> <em>*</em>详细地址：</label>
												<textarea id="street"></textarea>
												<span id="streeid" style="display: none"><i class="writer_wrong"></i><em id="strwrong" class="writer_word">信息报错样式显示！</em></span>
												<span id="streey" style="display: none"><i class="writer_right"> </i></span>
											</div>
											<div id="pname" class="shop_adress-Toadd">
												<label> <em>*</em>收货人：</label>
												<input type="text" class="true_name" id="addressName" />
												<span id="shrid" style="display: none"><i class="writer_wrong"></i><em id="shrwrong" class="writer_word"></em></span>
												<span id="shry" style="display: none"><i class="writer_right"> </i></span>
											</div>
											<div id="post" class="shop_adress-Toadd">
												<label> <em>*</em>邮政编码：</label>
												<input type="text" class="true_number" id="postcode" />
												<span id="postid" style="display: none"><i class="writer_wrong"></i><em id="postwrong" class="writer_word">信息报错样式显示！</em></span>
												<span id="posty" style="display: none"><i class="writer_right"> </i></span>
											</div>
											<div id="lx" class="shop_adress-Toadd">
												<label> <em>*</em>手机号码：</label>
												<input type="text" id="mobile" />
												<span id="telid" style="display: none"><i class="writer_wrong"></i><em id="telwrong" class="writer_word">信息报错样式显示！</em></span>
												<span id="tely" style="display: none"><i class="writer_right"> </i></span>
											</div>
											<div class="shop_adress-sp">
												<input type="checkbox" id="cbDefaultAddress" />
												<label for="cbDefaultAddress" class="add_adress-splabel"> 设为默认地址</label>
											</div>
											<div class="add_adress-save">
												<div class="bt1">
													<span>保存此地址</span>
												</div>
											</div>
										</div>
										<!--新加地址end-->
									</div>
									<!--收货地址end-->
								</div>
								<!--右边的主要内容end-->
							</div>
							<!--中间内容end-->
						</div>
						<!--内容end-->
					</div>
					<!--中间end-->
					<script>
						function szdefault(id) {
							$.get("/API/MemberAPI.ashx", {
								action: 'default',
								id: id
							}, function(data) {
								if (data == "ok") {
									alert("设置成功！");
								}
								if (data == "false") {
									alert("设置失败！");
								}
							});
						}
					</script>
				</div>




				<div style="position: fixed; cursor: pointer; right: 6px; top: 289px; padding-bottom: 152px; z-index: 9999; width: 19px; height: 103px; display: none;" onClick="openserver();" id="openbnt">
					<img width="19" height="103" src="images/server_03.jpg" />
				</div>

				<div class="mask" id="masks">
				</div>

				<script type="text/javascript">
					function showbox(id) {
						getQeestion(id);
						for (var i = 1; i <= 8; i++) {
							if (i == id) {
								showdiv(id);
							} else {
								hidediv(i);
							}
						}
					}

					function contenttxt(id, sid) {
						for (var i = 1; i <= 7; i++) {
							if (i == id) {
								showtxt(id, sid);
							} else {
								hidetxt(i, sid);
							}
						}

					}

					function showtxt(id, sid) {
						var objtitle = $("#content_title" + id + "_" + sid);

						if (objtitle.css("display") == "none") {
							objtitle.show("fast");
						} else {

							hidetxt(id, sid);
						}
						//$("#"+id).show("fast");
					}

					function hidetxt(id, sid) {
						var objtitle = $("#content_title" + id + "_" + sid);
						objtitle.hide("fast");
					}

					function hidediv(id) {
						$("#box" + id).hide("fast");

						$("#li" + id).css({
							"font-size": "14px",
							"color": "#7d7d7d"
						});
					}

					function showdiv(id) {
						if ($("#box" + id).css("display") == "none") {
							$("#box" + id).show("fast");
							$("#li" + id).css({
								"font-size": "18px",
								"color": "#000000"
							});
						}

					}
				</script>
				<script type="text/javascript">
					function showMask() {
						$("#masks").css("height", $(document).height());
						$("#masks").css("width", $(document).width());
						$("#masks").fadeIn();
					}

					function showModel(divName) {
						showMask();
						/* var top = ($(window).height() - $(divName).height()) / 5;
						 var left = ($(window).width() - $(divName).width()) / 2;
						 var scrollTop = $(document).scrollTop();
						 var scrollLeft = $(document).scrollLeft();*/
						$(divName).fadeIn();
					}

					function CloseMaskser() {

						$("#modelsever").fadeOut("slow");
						$("#masks").fadeOut("slow");
						$("#mask").fadeOut("slow");
					}
				</script>

	</body>

</html>